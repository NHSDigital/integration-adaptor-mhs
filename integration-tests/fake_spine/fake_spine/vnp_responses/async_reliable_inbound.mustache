POST https://vpn-client-1515.opentest.hscic.gov.uk/
====== HEADERS =====
Host: vpn-client-1515.opentest.hscic.gov.uk
User-Agent: Mozilla/5.0 (compatible; pycurl)
Accept-Encoding: none
Soapaction: urn:nhs:names:services:psis/MCCI_IN010000UK13
Accept: */*
Connection: close
Content-Type: multipart/related; boundary="--=_MIME-Boundary"; charset="UTF-8"; type="text/xml"; start="<ebXMLHeader@spine.nhs.uk>"
Content-Length: 3455
====== BODY =======
----=_MIME-Boundary
Content-Id: <ebXMLHeader@spine.nhs.uk>
Content-Type: text/xml
Content-Transfer-Encoding: 8bit

<?xml version='1.0' encoding='UTF-8'?>
<soap:Envelope xmlns:xsi="http://www.w3c.org/2001/XML-Schema-Instance"
               xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
               xmlns:eb="http://www.oasis-open.org/committees/ebxml-msg/schema/msg-header-2_0.xsd"
               xmlns:xlink="http://www.w3.org/1999/xlink">
    <soap:Header>
        <eb:MessageHeader eb:version="2.0" soap:mustUnderstand="1">
            <eb:From>
                <eb:PartyId eb:type="urn:nhs:names:partyType:ocs+serviceInstance">YES-0000806</eb:PartyId>
            </eb:From>
            <eb:To>
                <eb:PartyId eb:type="urn:nhs:names:partyType:ocs+serviceInstance">{{to_party_id}}</eb:PartyId>
            </eb:To>
            <eb:CPAId>S918999404212</eb:CPAId>
            <eb:ConversationId>{{conversation_id}}</eb:ConversationId>
            <eb:Service>urn:nhs:names:services:psis</eb:Service>
            <eb:Action>MCCI_IN010000UK13</eb:Action>
            <eb:MessageData>
                <eb:MessageId>{{message_id}}</eb:MessageId>
                <eb:Timestamp>2020-03-19T14:05:22Z</eb:Timestamp>
            </eb:MessageData>
            <eb:DuplicateElimination/>
        </eb:MessageHeader>
        <eb:AckRequested eb:version="2.0" soap:mustUnderstand="1"
                         soap:actor="urn:oasis:names:tc:ebxml-msg:actor:toPartyMSH" eb:signed="false"/>
        <eb:SyncReply eb:version="2.0" soap:mustUnderstand="1" soap:actor="http://schemas.xmlsoap.org/soap/actor/next"/>
    </soap:Header>
    <soap:Body>
        <eb:Manifest xmlns:hl7ebxml="urn:hl7-org:transport/ebXML/DSTUv1.0" eb:version="2.0">
            <eb:Reference xlink:href="cid:{{message_id}}@spine.nhs.uk">
                <eb:Schema eb:location="urn:hl7-org:v3_MCCI_IN010000UK13.xsd" eb:version="13"/>
                <eb:Description xml:lang="en">The HL7 payload</eb:Description>
                <hl7ebxml:Payload style="HL7" encoding="XML" version="3.0"/>
            </eb:Reference>
        </eb:Manifest>
    </soap:Body>
</soap:Envelope>

----=_MIME-Boundary
Content-Id: <{{message_id}}@spine.nhs.uk>
Content-Type: application/xml
Content-Transfer-Encoding: 8bit

<?xml version='1.0' encoding='UTF-8'?>
<RCMR_IN010000UK05 xmlns="urn:hl7-org:v3"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:hl7-org:v3 RCMR_IN010000UK05.xsd">
    <id root="{{message_id}}" />
    <creationTime value="20200218164108" />
    <versionCode code="V3NPfIT3.1.10"/>
    <interactionId extension="RCMR_IN010000UK05" root="2.16.840.1.113883.2.1.3.2.4.12"/>
    <processingCode code="P"/>
    <processingModeCode code="T"/>
    <acceptAckCode code="NE"/>
    <communicationFunctionRcv typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
            <id extension="200000000149" root="1.2.826.0.1285.0.2.0.107"/>
        </device>
    </communicationFunctionRcv>
    <communicationFunctionSnd typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
            <id extension="200000001161" root="1.2.826.0.1285.0.2.0.107"/>
        </device>
    </communicationFunctionSnd>
    <ControlActEvent classCode="CACT" moodCode="EVN">
        <author1 typeCode="AUT">
            <AgentSystemSDS classCode="AGNT">
                <agentSystemSDS classCode="DEV" determinerCode="INSTANCE">
                    <id extension="200000001161" root="1.2.826.0.1285.0.2.0.107"/>
                </agentSystemSDS>
            </AgentSystemSDS>
        </author1>
        <subject contextConductionInd="false" typeCode="SUBJ">
            <EhrRequest classCode="EXTRACT" moodCode="RQO">
                <id root="{{message_id}}"/>
                <recordTarget typeCode="RCT">
                    <patient classCode="PAT">
                        <id root="2.16.840.1.113883.2.1.4.1" extension="9658218873"/>
                    </patient>
                </recordTarget>
                <author typeCode="AUT">
                    <AgentOrgSDS classCode="AGNT">
                        <agentOrganizationSDS classCode="ORG" determinerCode="INSTANCE">
                            <id root="1.2.826.0.1285.0.1.10" extension="B86041"/>
                        </agentOrganizationSDS>
                    </AgentOrgSDS>
                </author>
                <destination typeCode="DST">
                    <AgentOrgSDS classCode="AGNT">
                        <agentOrganizationSDS classCode="ORG" determinerCode="INSTANCE">
                            <id root="1.2.826.0.1285.0.1.10" extension="M85019"/>
                        </agentOrganizationSDS>
                    </AgentOrgSDS>
                </destination>
            </EhrRequest>
        </subject>
    </ControlActEvent>
</RCMR_IN010000UK05>
----=_MIME-Boundary--
